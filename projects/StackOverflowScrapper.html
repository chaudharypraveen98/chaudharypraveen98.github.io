<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>StackOverflowScraper</title><meta name="description" content="This contains all the projects made by Praveen chaudhary">
        <meta name="keywords" content="chaudharypraveen98,Praveen Chaudhary,devilunknown, Praveen Chaudhary projects, StackOverflowScraper">
        <meta name="robots" content="index, follow">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="language" content="English">
        <meta name="revisit-after" content="2 days">
        <meta name="author" content="@chaudharypraveen98">
        <meta name="twitter:title" content="Praveen Chaudhary">
        <meta name="twitter:description" content=" Personal Projects Section">
        <meta name="twitter:image" content="https://pbs.twimg.com/profile_images/1366311960468332546/EidYygUt_400x400.jpg">
        <meta name="twitter:card" content="summary_large_image">
        <meta property="og:title" content="Praveen Chaudhary - a Full Stack Developer" />
        <meta property="og:url" content="https://www.linkedin.com/in/chaudharypraveen98/" />
        <meta property="og:description" content="This is the personal portfolio page which contains all the projects. I am a Full Stack Developer, Rest Api Developer, Data Analsyt" />
        <meta property="og:image" content="https://media-exp1.licdn.com/dms/image/C5603AQHRamUaMrdA9g/profile-displayphoto-shrink_400_400/0/1597315489941?e=1629936000&v=beta&t=GjvQu_r0n3F2EtGkaRYSF6pH8vRdgx5lsD1-w8dc8gY" />
        <meta property="og:type" content="Portfolio.Projects" />
        <link rel="shortcut icon" href="./../favicon.ico" type="image/x-icon">
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="index.html">StackOverflowScraper</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto py-4 py-lg-0">
                        <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="https://chaudharypraveen98.github.io/about.html">About</a></li>
                        <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="https://chaudharypraveen98.github.io/project-preview/">Latest Works</a></li>
                        <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="https://chaudharypraveen98.github.io/contact.html">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Page Header-->
        <header class="masthead" style="background-image: url('assets/img/post-bg.jpg')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="post-heading">
                            <h1>StackOverflowScraper</h1>
                            <h2 class="subheading">This project aims to scraps questions depending on the fields, no of pages and question size. It makes a file with required tag. You can edit the filename easily.</h2>
                            <span class="meta">
                                Posted by
                                <a href="https://github.com/chaudharypraveen98">Praveen Chaudhary</a>
                                on 27 July 2020
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Post Content-->
        <article class="mb-4">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <h3>Topics -> requests, requests-html, pandas, scraping, scripting, StackOverflowScraper</h3>
                        <h5>Preview Link -> <u><a href="https://drive.google.com/file/d/1HATnEAczmo3SlCD1ctq8nfH_QU0Mw-xc/preview">StackOverflowScraper</a></u></h5>
                        <h5>Source Code Link -> <u><a href="https://github.com/chaudharypraveen98/StackOverflowScraper">GitHub</a></u></h5>
                        <iframe src="https://drive.google.com/file/d/1HATnEAczmo3SlCD1ctq8nfH_QU0Mw-xc/preview" width="640" height="480" allow="autoplay"></iframe>
                        <p><strong>What We are going to do?</strong></p>
                        <ol>
                            <li>First, we made a request to fetch the html page using the requests library</li>
                            <li>If the response is OK , then we feed into the HTML parser from requests-HTML</li>
                            <li>We will then use the selectors to get the required fields like question title, tag , votes and answered.</li>
                        </ol>
                        <h2 class="section-heading">libraries Required : - </h2>
                        <ol>
                          <li>Request-html</li>
                          <li>Pandas</li>
                          <li>Request library</li>
                        </ol>
                        <h2 class="section-heading">Prerequisites</h2>
                        <p><strong>What are selectors/locators?</strong></p>
                        <p>A CSS Selector is a combination of an element selector and a value which identifies the web element within a web page.</p>
                        <p><b>The choice of locator depends largely on your Application Under Test</b></p>
                        <b>Id</b>
                        <p>An element’s id in XPATH is defined using: “[@id='example']” and in CSS using: “#” - ID's must be unique within the DOM.</p>
                        <p>Examples:</p>
                        <pre>
XPath: //div[@id='example']
CSS: #example
                      </pre>
                      <p><b>Element Type</b></p>
                       <p>The previous example showed //div in the xpath. That is the element type, which could be input for a text box or button, img for an image, or "a" for a link. </p>
                        
                        <pre>
Xpath: //input or
Css: =input
                      </pre>
                      <p><b>Direct Child</b></p>
                        <p>HTML pages are structured like XML, with children nested inside of parents. If you can locate, for example, the first link within a div, you can construct a string to reach it. A direct child in XPATH is defined by the use of a “/“, while on CSS, it’s defined using “>”. </p>
                        <p>Examples:</p>
                        <pre>                        
XPath: //div/a
CSS: div > a
                      </pre>
                      <p><b>Child or Sub-Child</b></p>
                        <p>Writing nested divs can get tiring - and result in code that is brittle. Sometimes you expect the code to change, or want to skip layers. If an element could be inside another or one of its children, it’s defined in XPATH using “//” and in CSS just by a whitespace.</p>
                        <p>Examples:</p>
                        <pre>
                        
XPath: //div//a
CSS: div a
                      </pre>
                      <p><b>Class</b></p>
                        <p>For classes, things are pretty similar in XPATH: “[@class='example']” while in CSS it’s just “.” </p>
                        <p>Examples:</p>
                        <pre>
XPath: //div[@class='example']
CSS: .example
                        </pre>
                        <h2 class="section-heading">Understanding the code : - </h2>
                        <h2 class="section-heading">Requesting the html webpage</h2>
                        <p>We will using the requests library to fetch the html code </p>
                        <pre>
def extract_from_url(url):
  r = requests.get(url)
  if r.status_code not in range(200, 299):
      print("error")
      return "error while finding the data"
                        </pre>
                        <p><b>r.status_code</b> will check the response status code. If it is valid then proceed to other part.</p>
                        <h2 class="section-heading">Parsing the Html code using HTML from requests-HTML</h2>
                        <pre>
html_text = r.text
formatted_html = HTML(html=html_text)
                        </pre>
                        <h2 class="section-heading">Scraping using the parsed HTML code</h2>
                        <pre>
data_summary = formatted_html.find(".question-summary")
data = []
classes_needed = ['.vote-count-post', '.question-hyperlink']
final_data = []
for question in data_summary:
    question_votes = question.find('.vote-count-post', first=True).text
    question_data = question.find('.question-hyperlink', first=True).text
    question_tags = question.find('.tags', first=True).text
    data = {}
    data["question"] = question_data
    data["votes"] = question_votes
    data["tags"] = question_tags
    final_data.append(data)
return final_data
                        </pre>
                        <p>First we find the question container that contains whole information. We had used the class css selector (.question-summary)</p>
                        <p>Then, we loop through all the question container.We can easily extract other details using the css selector like</p>
                        <ul>
                          <li>('.vote-count-post') selector for votes</li>
                          <li>('.question-hyperlink') selector for question link</li>
                          <li>('.tags') selector for getting all the tags for the question</li>
                        </ul>
                        <h2 class="section-heading">Starting Scraper and Saving data into CSV format</h2>
                        <p></p>
                        <pre>
def scrape_stack(tag="python", page=1, pagesize="20", sortby="votes"):
    base_url = "https://stackoverflow.com/questions/tagged/"
    all_page_data = []
    # iterating through each pages
    for i in range(1, page + 1):
        url = f"{base_url}{tag}?tab={sortby}&page={i}&pagesize={pagesize}"
        all_page_data += extract_from_url(url)
    df = pd.DataFrame(all_page_data)
    df.to_csv(f"{tag}.csv", index=False)
                        </pre>
                        <p>To scrap the Stack Overflows Question , We have 4 keyword argument</p>
                        <p>scrape_stack(tag="python", page=1, pagesize="20", sortby="votes")</p>
                        <p>where</p>
                        <ol>
                          <li><b>tag</b> : Field you want to search like c, javascript, html etc.</li>
                          <li><b>page</b> : How many pages you want to search.</li>
                          <li><b>pagesize</b> : How much questions or thread each page contains.</li>
                          <li><b>sortby</b> : You can sort the question according to votes,newest,active and unanswered.</li>
                        </ol>
                        <p>if argument are passed then we made the url according to it, otherwise we will use the default arguments.</p>
                        <p>Once the scraping is done, we load that data into pandas dataframe. Once we are able to make dataframe, then we can easily export the data into .csv file.</p>
                        <h2 class="section-heading">How to setup/run on local machine</h2>
                        <ol>
                        <li>First clone the repo by following command:- <pre>git clone https://github.com/chaudharypraveen98/StackOverflowScraper.git</pre></li>
                        <li>Then you have to install all the required dependencies by following command :- <pre>pip3 install -r requirements.txt</pre></li>
                        <li>Run the file in python interactive mode. Now you are ready to go. To scrap the Stack Overflows Question , type:-
                        <pre>scrape_stack(tag="python", page=1, pagesize="20", sortby="votes")</pre></li></ol>
                        <h2 class="section-heading">Deployment</h2>
                        <p>For deployment,  We are using the <strong>Repl</strong> or <strong>Heroku</strong> to deploy our localhost to web.<span><a href="https://replit.com/">For More Info</a></span></p>
                        <h2 class="section-heading">Web Preview / Output</h2>
                        <a href="https://raw.githubusercontent.com/chaudharypraveen98/StackOverflowScraper/master/questions.JPG"><img class="img-fluid" src="https://raw.githubusercontent.com/chaudharypraveen98/StackOverflowScraper/master/questions.JPG" alt="web preview" /></a>
                        <span class="caption text-muted">Web preview on deployment</span>
                        <p>
                            Placeholder text by
                            <a href="https://chaudharypraveen98.github.io/">Praveen Chaudhary</a>
                            &middot; Images by
                            <a href="hhttps://chaudharypraveen98.github.io/binarybeast/">Binary Beast</a>
                        </p>
                    </div>
                </div>
            </div>
        </article>
        <!-- Footer-->
        <footer class="border-top">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <ul class="list-inline text-center">
                            <li class="list-inline-item">
                                <a href="https://twitter.com/chaudhpraveen98">
                                    <span class="fa-stack fa-lg">
                                        <i class="fas fa-circle fa-stack-2x"></i>
                                        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://www.linkedin.com/in/chaudharypraveen98/">
                                    <span class="fa-stack fa-lg">
                                        <i class="fas fa-circle fa-stack-2x"></i>
                                        <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://github.com/chaudharypraveen98">
                                    <span class="fa-stack fa-lg">
                                        <i class="fas fa-circle fa-stack-2x"></i>
                                        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                        </ul>
                        <div class="small text-center text-muted fst-italic">Copyright &copy; Praveen Chaudhary 2021</div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
